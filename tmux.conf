# GENERAL
#

# Long history
set -g history-limit 20000

# Scroll pane contents with mouse
set -g mouse on

# WINDOWS
#

# Number windows from 1
set -g base-index 1
# Renumber windows after one window is closed
set -g renumber-windows on
# Refresh window title every 5 seconds
set -g status-interval 5

# COLOURS
#

set -g default-terminal "screen-256color"
set -g mode-style bg=colour229,fg=black
set -g status-bg colour238
set -g status-fg white
set -g window-status-style bg=colour236,fg=white
set -g window-status-current-style bg=colour236,fg=white

# CAPTIONS
#

set -g status-left ""
set -g status-right " %H:%M "
# Pipeline yields current path, with ~ as home dir. If path exceeds 40
# chars, last 40 chars are left, if this results in a partial path
# segment at the beginning, it is removed.
set -g window-status-current-format \
   ' #[fg=colour209]#I#[fg=colour229] #(echo #{pane_current_path} | \
     sed -E "s|$HOME|~|" | tail -c 40 | sed -E "s|^[^/~]+/||") #[fg=colour15]#W '
set -g window-status-format \
   ' #[fg=colour252]#I #(echo #{pane_current_path} | \
     sed -E "s|$HOME|~|" | tail -c 40 | sed -E "s|^[^/~]+/||") #W '


# CLIPBOARD
#

# mouse drag finished - copy selection
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe "xsel -ip"
# mouse1 double click - copy word
bind-key -T root DoubleClick1Pane select-pane \; copy-mode \; send-keys -MX select-word \; send-keys -X copy-pipe "xsel -ip"
bind-key -T copy-mode DoubleClick1Pane select-pane \; send-keys -MX select-word \; send-keys -X copy-pipe "xsel -ip"
# mouse1 triple click - copy line
bind-key -T copy-mode TripleClick1Pane send-keys -MX select-line \; send-keys -X copy-pipe "xsel -ip"
# mouse1 down in copy mode - cancel selection
bind-key -T copy-mode MouseDown1Pane send-keys -X clear-selection
# mouse2 down - paste
bind-key -T root MouseDown2Pane run "xsel -o | tmux load-buffer - ; tmux paste-buffer"
bind-key -T copy-mode MouseDown2Pane run "xsel -o | tmux load-buffer - ; tmux paste-buffer" \; send-keys -X cancel
# M-w - copy
bind-key -T copy-mode M-w send-keys -X copy-pipe-and-cancel "xsel -ib"
# C-y - paste
bind-key C-y run "xsel -ob | tmux load-buffer - ; tmux paste-buffer"
# Specify separators for select-word
set -g word-separators ' '

# KEY BINDINGS
#

# By default, create new pane in the same directory as the current one
bind-key c new-window -c "#{pane_current_path}"
